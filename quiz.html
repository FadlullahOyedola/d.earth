<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discover Earth ‚Ä¢ Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    body { 
      background: linear-gradient(135deg, #dbeafe, #f0fdf4, #fffbeb);
      transition: background-color 0.3s;
    }
    html.dark body {
      background: linear-gradient(135deg, #0f172a, #1e293b, #111827);
    }
    .card {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 25px rgba(0,0,0,0.2);
    }
    .chip {
        background-color: rgba(255,255,255,0.6);
        border: 1px solid rgba(0,0,0,0.05);
        backdrop-filter: blur(5px);
    }
    html.dark .chip {
        background-color: rgba(30,41,59,0.6);
        border: 1px solid rgba(255,255,255,0.05);
    }
  </style>
</head>
<body class="font-sans text-gray-900 dark:text-gray-100 transition-colors duration-300">

  <header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md flex justify-between items-center px-6 py-4 shadow">
    <a href="dashboard.html" class="text-2xl font-bold text-sky-700 dark:text-cyan-400">üåç Geography Hub</a>
    <div class="flex items-center gap-4">
      <button id="themeToggle" class="px-3 py-2 rounded-full bg-sky-200 dark:bg-gray-700 hover:bg-sky-300 dark:hover:bg-gray-600 transition">Dark Mode</button>
      <a href="login.html" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg shadow transition">Logout</a>
    </div>
  </header>

  <main class="max-w-4xl mx-auto py-8 px-4">
    <article class="chip card rounded-2xl p-6">
      <h2 class="text-xl font-semibold text-sky-700 dark:text-cyan-400">Today‚Äôs Quiz</h2>
      <p class="text-sm text-gray-600 dark:text-gray-300">Test your knowledge with 100 questions on various global topics.</p>

      <form id="quizForm" class="mt-6 space-y-6">
        </form>
      
      <div class="flex items-center justify-between pt-2">
        <button type="button" id="clearBtn" class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition">Clear</button>
        <button type="submit" form="quizForm" class="px-5 py-3 rounded-lg bg-sky-500 hover:bg-sky-600 dark:bg-cyan-500 dark:hover:bg-cyan-600 text-white font-semibold transition">Submit Quiz</button>
      </div>
    </article>

    <dialog id="resultModal" class="card rounded-2xl p-0 w-full max-w-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 backdrop:bg-black/40">
      <div class="p-6">
        <h3 id="resultTitle" class="text-xl font-bold">üéâ Excellent!</h3>
        <p id="resultMsg" class="text-sm text-gray-600 dark:text-gray-300 mt-1">You smashed it. Badge check on dashboard.</p>
        <div class="mt-4 grid grid-cols-2 gap-3">
          <div class="glass rounded-xl p-3 text-center bg-gray-100 dark:bg-gray-700">
            <div class="text-xs text-gray-500 dark:text-gray-400">Score</div>
            <div id="scoreVal" class="text-2xl font-bold">0%</div>
          </div>
          <div class="glass rounded-xl p-3 text-center bg-gray-100 dark:bg-gray-700">
            <div class="text-xs text-gray-500 dark:text-gray-400">XP Earned</div>
            <div id="xpEarned" class="text-2xl font-bold">+0</div>
          </div>
        </div>
        <div class="mt-5 flex justify-end gap-2">
          <button id="closeModal" class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition">Stay</button>
          <a href="dashboard.html" class="px-4 py-2 rounded-lg bg-sky-500 hover:bg-sky-600 dark:bg-cyan-500 dark:hover:bg-cyan-600 text-white transition">Go to Dashboard</a>
        </div>
      </div>
    </dialog>
  </main>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    function applyTheme() {
        if(localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            themeToggle.textContent = 'Light Mode';
        } else {
            document.documentElement.classList.remove('dark');
            themeToggle.textContent = 'Dark Mode';
        }
    }
    applyTheme();
    themeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        let newTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
        localStorage.setItem('theme', newTheme);
        themeToggle.textContent = newTheme === 'dark' ? 'Light Mode' : 'Dark Mode';
    });
    
    // Quiz data structure (100 questions)
    const quizData = [
      {
        question: "What is the capital of Australia?",
        options: [{ text: "Sydney", correct: false }, { text: "Canberra", correct: true }, { text: "Melbourne", correct: false }]
      },
      {
        question: "Which river is the longest in the world?",
        options: [{ text: "Amazon River", correct: true }, { text: "Nile River", correct: false }, { text: "Mississippi River", correct: false }]
      },
      {
        question: "Which mountain is the tallest in the world?",
        options: [{ text: "K2", correct: false }, { text: "Mount Everest", correct: true }, { text: "Mount Kilimanjaro", correct: false }]
      },
      {
        question: "Which ocean is the largest?",
        options: [{ text: "Atlantic Ocean", correct: false }, { text: "Indian Ocean", correct: false }, { text: "Pacific Ocean", correct: true }]
      },
      {
        question: "What is the capital of Canada?",
        options: [{ text: "Toronto", correct: false }, { text: "Vancouver", correct: false }, { text: "Ottawa", correct: true }]
      },
      {
        question: "Which desert is the largest hot desert in the world?",
        options: [{ text: "Gobi Desert", correct: false }, { text: "Sahara Desert", correct: true }, { text: "Arabian Desert", correct: false }]
      },
      {
        question: "Which country is home to the Great Wall of China?",
        options: [{ text: "Japan", correct: false }, { text: "China", correct: true }, { text: "South Korea", correct: false }]
      },
      {
        question: "The Nile River flows into which body of water?",
        options: [{ text: "Red Sea", correct: false }, { text: "Indian Ocean", correct: false }, { text: "Mediterranean Sea", correct: true }]
      },
      {
        question: "What is the capital of Brazil?",
        options: [{ text: "S√£o Paulo", correct: false }, { text: "Bras√≠lia", correct: true }, { text: "Rio de Janeiro", correct: false }]
      },
      {
        question: "Which continent is the largest by land area?",
        options: [{ text: "Africa", correct: false }, { text: "North America", correct: false }, { text: "Asia", correct: true }]
      },
      {
        question: "Which famous landmark is located in Paris, France?",
        options: [{ text: "Statue of Liberty", correct: false }, { text: "Eiffel Tower", correct: true }, { text: "Colosseum", correct: false }]
      },
      {
        question: "What is the capital of Egypt?",
        options: [{ text: "Alexandria", correct: false }, { text: "Cairo", correct: true }, { text: "Luxor", correct: false }]
      },
      {
        question: "Which country is known as the 'Land of the Rising Sun'?",
        options: [{ text: "China", correct: false }, { text: "Japan", correct: true }, { text: "Thailand", correct: false }]
      },
      {
        question: "The Panama Canal connects which two oceans?",
        options: [{ text: "Atlantic and Pacific", correct: true }, { text: "Indian and Atlantic", correct: false }, { text: "Pacific and Indian", correct: false }]
      },
      {
        question: "What is the capital of Italy?",
        options: [{ text: "Venice", correct: false }, { text: "Rome", correct: true }, { text: "Milan", correct: false }]
      },
      {
        question: "Which is the largest island in the world?",
        options: [{ text: "Australia", correct: false }, { text: "Greenland", correct: true }, { text: "Madagascar", correct: false }]
      },
      {
        question: "The Sahara Desert is located on which continent?",
        options: [{ text: "Asia", correct: false }, { text: "South America", correct: false }, { text: "Africa", correct: true }]
      },
      {
        question: "Which city is the capital of the United Kingdom?",
        options: [{ text: "Manchester", correct: false }, { text: "London", correct: true }, { text: "Edinburgh", correct: false }]
      },
      {
        question: "Which country is known for its fjords?",
        options: [{ text: "Sweden", correct: false }, { text: "Norway", correct: true }, { text: "Finland", correct: false }]
      },
      {
        question: "What is the capital of Russia?",
        options: [{ text: "St. Petersburg", correct: false }, { text: "Moscow", correct: true }, { text: "Kiev", correct: false }]
      },
      {
        question: "Which sea is the largest?",
        options: [{ text: "Mediterranean Sea", correct: false }, { text: "South China Sea", correct: true }, { text: "Caribbean Sea", correct: false }]
      },
      {
        question: "What is the capital of Argentina?",
        options: [{ text: "Santiago", correct: false }, { text: "Buenos Aires", correct: true }, { text: "Lima", correct: false }]
      },
      {
        question: "The Great Barrier Reef is located off the coast of which country?",
        options: [{ text: "Indonesia", correct: false }, { text: "Australia", correct: true }, { text: "Brazil", correct: false }]
      },
      {
        question: "Which is the smallest continent by land area?",
        options: [{ text: "Europe", correct: false }, { text: "Antarctica", correct: false }, { text: "Australia", correct: true }]
      },
      {
        question: "What is the capital of Spain?",
        options: [{ text: "Barcelona", correct: false }, { text: "Madrid", correct: true }, { text: "Lisbon", correct: false }]
      },
      {
        question: "The Amazon rainforest is primarily located in which country?",
        options: [{ text: "Colombia", correct: false }, { text: "Brazil", correct: true }, { text: "Peru", correct: false }]
      },
      {
        question: "Which African country has the most pyramids?",
        options: [{ text: "Egypt", correct: false }, { text: "Sudan", correct: true }, { text: "Ethiopia", correct: false }]
      },
      {
        question: "What is the capital of Germany?",
        options: [{ text: "Frankfurt", correct: false }, { text: "Berlin", correct: true }, { text: "Munich", correct: false }]
      },
      {
        question: "Which major river flows through London?",
        options: [{ text: "River Seine", correct: false }, { text: "River Thames", correct: true }, { text: "River Danube", correct: false }]
      },
      {
        question: "What is the capital of China?",
        options: [{ text: "Shanghai", correct: false }, { text: "Beijing", correct: true }, { text: "Hong Kong", correct: false }]
      },
      {
        question: "Which country is a long, narrow country in South America?",
        options: [{ text: "Argentina", correct: false }, { text: "Chile", correct: true }, { text: "Brazil", correct: false }]
      },
      {
        question: "What is the capital of South Africa?",
        options: [{ text: "Cape Town", correct: false }, { text: "Pretoria", correct: true }, { text: "Johannesburg", correct: false }]
      },
      {
        question: "The Andes Mountains are located on which continent?",
        options: [{ text: "Europe", correct: false }, { text: "Asia", correct: false }, { text: "South America", correct: true }]
      },
      {
        question: "What is the capital of Mexico?",
        options: [{ text: "Canc√∫n", correct: false }, { text: "Mexico City", correct: true }, { text: "Guadalajara", correct: false }]
      },
      {
        question: "Which state is the largest by area in the USA?",
        options: [{ text: "Texas", correct: false }, { text: "Alaska", correct: true }, { text: "California", correct: false }]
      },
      {
        question: "Which is the most populous country in the world?",
        options: [{ text: "China", correct: false }, { text: "India", correct: true }, { text: "USA", correct: false }]
      },
      {
        question: "The Strait of Gibraltar connects the Atlantic Ocean to which sea?",
        options: [{ text: "Mediterranean Sea", correct: true }, { text: "Red Sea", correct: false }, { text: "Black Sea", correct: false }]
      },
      {
        question: "What is the capital of Nigeria?",
        options: [{ text: "Lagos", correct: false }, { text: "Abuja", correct: true }, { text: "Port Harcourt", correct: false }]
      },
      {
        question: "The Gobi Desert is located in which two countries?",
        options: [{ text: "Russia and Kazakhstan", correct: false }, { text: "China and Mongolia", correct: true }, { text: "India and Pakistan", correct: false }]
      },
      {
        question: "What is the capital of Japan?",
        options: [{ text: "Kyoto", correct: false }, { text: "Tokyo", correct: true }, { text: "Osaka", correct: false }]
      },
      {
        question: "The country known as the 'Pearl of Africa' is...",
        options: [{ text: "Kenya", correct: false }, { text: "Uganda", correct: true }, { text: "Tanzania", correct: false }]
      },
      {
        question: "What is the capital of New Zealand?",
        options: [{ text: "Auckland", correct: false }, { text: "Wellington", correct: true }, { text: "Christchurch", correct: false }]
      },
      {
        question: "Which river flows through Paris?",
        options: [{ text: "River Thames", correct: false }, { text: "River Seine", correct: true }, { text: "River Rhone", correct: false }]
      },
      {
        question: "What is the highest mountain in Africa?",
        options: [{ text: "Mount Kenya", correct: false }, { text: "Mount Kilimanjaro", correct: true }, { text: "Mount Everest", correct: false }]
      },
      {
        question: "Which is the most populous city in the world?",
        options: [{ text: "Delhi", correct: false }, { text: "Tokyo", correct: true }, { text: "Shanghai", correct: false }]
      },
      {
        question: "What is the capital of Sweden?",
        options: [{ text: "Oslo", correct: false }, { text: "Stockholm", correct: true }, { text: "Copenhagen", correct: false }]
      },
      {
        question: "The Colosseum is located in which city?",
        options: [{ text: "Athens", correct: false }, { text: "Rome", correct: true }, { text: "Istanbul", correct: false }]
      },
      {
        question: "What is the capital of Portugal?",
        options: [{ text: "Porto", correct: false }, { text: "Lisbon", correct: true }, { text: "Madrid", correct: false }]
      },
      {
        question: "Which country is shaped like a boot?",
        options: [{ text: "Greece", correct: false }, { text: "Italy", correct: true }, { text: "Spain", correct: false }]
      },
      {
        question: "What is the capital of South Korea?",
        options: [{ text: "Busan", correct: false }, { text: "Seoul", correct: true }, { text: "Incheon", correct: false }]
      },
      {
        question: "The Victoria Falls are located on the border of which two countries?",
        options: [{ text: "Kenya and Tanzania", correct: false }, { text: "Zambia and Zimbabwe", correct: true }, { text: "Egypt and Sudan", correct: false }]
      },
      {
        question: "What is the capital of Finland?",
        options: [{ text: "Stockholm", correct: false }, { text: "Helsinki", correct: true }, { text: "Oslo", correct: false }]
      },
      {
        question: "Which desert is the largest in the world?",
        options: [{ text: "Gobi Desert", correct: false }, { text: "Sahara Desert", correct: false }, { text: "Antarctic Polar Desert", correct: true }]
      },
      {
        question: "What is the capital of the Netherlands?",
        options: [{ text: "Rotterdam", correct: false }, { text: "Amsterdam", correct: true }, { text: "Utrecht", correct: false }]
      },
      {
        question: "Which country is known for the Pyramids of Giza?",
        options: [{ text: "Egypt", correct: true }, { text: "Sudan", correct: false }, { text: "Iraq", correct: false }]
      },
      {
        question: "What is the capital of Greece?",
        options: [{ text: "Thessaloniki", correct: false }, { text: "Athens", correct: true }, { text: "Corfu", correct: false }]
      },
      {
        question: "The Rocky Mountains are located in which two countries?",
        options: [{ text: "USA and Canada", correct: true }, { text: "USA and Mexico", correct: false }, { text: "Canada and Greenland", correct: false }]
      },
      {
        question: "What is the capital of Ireland?",
        options: [{ text: "Belfast", correct: false }, { text: "Dublin", correct: true }, { text: "Cork", correct: false }]
      },
      {
        question: "Which is the largest country by land area?",
        options: [{ text: "China", correct: false }, { text: "Canada", correct: false }, { text: "Russia", correct: true }]
      },
      {
        question: "What is the capital of Egypt?",
        options: [{ text: "Alexandria", correct: false }, { text: "Cairo", correct: true }, { text: "Giza", correct: false }]
      },
      {
        question: "Which country is known for the Alps mountain range?",
        options: [{ text: "Switzerland", correct: true }, { text: "Spain", correct: false }, { text: "Portugal", correct: false }]
      },
      {
        question: "What is the capital of Turkey?",
        options: [{ text: "Istanbul", correct: false }, { text: "Ankara", correct: true }, { text: "Izmir", correct: false }]
      },
      {
        question: "Which river is the longest in Africa?",
        options: [{ text: "Congo River", correct: false }, { text: "Nile River", correct: true }, { text: "Niger River", correct: false }]
      },
      {
        question: "What is the capital of Thailand?",
        options: [{ text: "Phuket", correct: false }, { text: "Bangkok", correct: true }, { text: "Chiang Mai", correct: false }]
      },
      {
        question: "The city of Venice is famous for what?",
        options: [{ text: "Its canals", correct: true }, { text: "Its pyramids", correct: false }, { text: "Its cherry blossoms", correct: false }]
      },
      {
        question: "What is the capital of Vietnam?",
        options: [{ text: "Ho Chi Minh City", correct: false }, { text: "Hanoi", correct: true }, { text: "Da Nang", correct: false }]
      },
      {
        question: "Which strait separates Asia from North America?",
        options: [{ text: "Strait of Magellan", correct: false }, { text: "Bering Strait", correct: true }, { text: "Strait of Hormuz", correct: false }]
      },
      {
        question: "What is the capital of Saudi Arabia?",
        options: [{ text: "Mecca", correct: false }, { text: "Riyadh", correct: true }, { text: "Jeddah", correct: false }]
      },
      {
        question: "The country with the most lakes is...",
        options: [{ text: "USA", correct: false }, { text: "Russia", correct: false }, { text: "Canada", correct: true }]
      },
      {
        question: "What is the capital of the Philippines?",
        options: [{ text: "Quezon City", correct: false }, { text: "Manila", correct: true }, { text: "Davao", correct: false }]
      },
      {
        question: "Which country is the smallest in the world?",
        options: [{ text: "Monaco", correct: false }, { text: "Vatican City", correct: true }, { text: "San Marino", correct: false }]
      },
      {
        question: "What is the capital of Iran?",
        options: [{ text: "Isfahan", correct: false }, { text: "Tehran", correct: true }, { text: "Shiraz", correct: false }]
      },
      {
        question: "Which of these is not one of the five Great Lakes?",
        options: [{ text: "Lake Michigan", correct: false }, { text: "Lake Ontario", correct: false }, { text: "Lake Tahoe", correct: true }]
      },
      {
        question: "What is the capital of Peru?",
        options: [{ text: "Cusco", correct: false }, { text: "Lima", correct: true }, { text: "Machu Picchu", correct: false }]
      },
      {
        question: "The highest waterfall in the world is...",
        options: [{ text: "Niagara Falls", correct: false }, { text: "Angel Falls", correct: true }, { text: "Victoria Falls", correct: false }]
      },
      {
        question: "What is the capital of Afghanistan?",
        options: [{ text: "Kandahar", correct: false }, { text: "Kabul", correct: true }, { text: "Herat", correct: false }]
      },
      {
        question: "Which country is known for its extensive system of canals?",
        options: [{ text: "Italy", correct: false }, { text: "Netherlands", correct: true }, { text: "Belgium", correct: false }]
      },
      {
        question: "What is the capital of Pakistan?",
        options: [{ text: "Karachi", correct: false }, { text: "Islamabad", correct: true }, { text: "Lahore", correct: false }]
      },
      {
        question: "The continent with the lowest average elevation is...",
        options: [{ text: "North America", correct: false }, { text: "Antarctica", correct: true }, { text: "Australia", correct: false }]
      },
      {
        question: "What is the capital of Ukraine?",
        options: [{ text: "Lviv", correct: false }, { text: "Kyiv", correct: true }, { text: "Odesa", correct: false }]
      },
      {
        question: "Which country is the world's largest producer of coffee?",
        options: [{ text: "Colombia", correct: false }, { text: "Brazil", correct: true }, { text: "Vietnam", correct: false }]
      },
      {
        question: "What is the capital of Iraq?",
        options: [{ text: "Basra", correct: false }, { text: "Baghdad", correct: true }, { text: "Mosul", correct: false }]
      },
      {
        question: "The 'Ring of Fire' is a region known for...",
        options: [{ text: "Extensive gold mining", correct: false }, { text: "Volcanic eruptions and earthquakes", correct: true }, { text: "Dense tropical forests", correct: false }]
      },
      {
        question: "What is the capital of Syria?",
        options: [{ text: "Aleppo", correct: false }, { text: "Damascus", correct: true }, { text: "Homs", correct: false }]
      },
      {
        question: "Which continent does the Tropic of Capricorn not pass through?",
        options: [{ text: "South America", correct: false }, { text: "Africa", correct: false }, { text: "Europe", correct: true }]
      },
      {
        question: "What is the capital of Cuba?",
        options: [{ text: "Varadero", correct: false }, { text: "Havana", correct: true }, { text: "Santiago", correct: false }]
      },
      {
        question: "The largest lake in Africa is...",
        options: [{ text: "Lake Malawi", correct: false }, { text: "Lake Victoria", correct: true }, { text: "Lake Tanganyika", correct: false }]
      },
      {
        question: "What is the capital of Venezuela?",
        options: [{ text: "Maracaibo", correct: false }, { text: "Caracas", correct: true }, { text: "Valencia", correct: false }]
      },
      {
        question: "Which country has the most active volcanoes?",
        options: [{ text: "USA", correct: false }, { text: "Indonesia", correct: true }, { text: "Japan", correct: false }]
      },
      {
        question: "What is the capital of Algeria?",
        options: [{ text: "Oran", correct: false }, { text: "Algiers", correct: true }, { text: "Constantine", correct: false }]
      },
      {
        question: "The Sahara Desert is located in which region?",
        options: [{ text: "Northern Africa", correct: true }, { text: "Southern Asia", correct: false }, { text: "Central Australia", correct: false }]
      },
      {
        question: "What is the capital of Chile?",
        options: [{ text: "Valpara√≠so", correct: false }, { text: "Santiago", correct: true }, { text: "Concepci√≥n", correct: false }]
      },
      {
        question: "Which ocean borders Europe to the west?",
        options: [{ text: "Indian Ocean", correct: false }, { text: "Atlantic Ocean", correct: true }, { text: "Pacific Ocean", correct: false }]
      },
      {
        question: "What is the capital of Uruguay?",
        options: [{ text: "Montevideo", correct: true }, { text: "Punta del Este", correct: false }, { text: "Salto", correct: false }]
      },
      {
        question: "Which river runs through Baghdad, Iraq?",
        options: [{ text: "Nile River", correct: false }, { text: "Tigris River", correct: true }, { text: "Euphrates River", correct: false }]
      },
      {
        question: "What is the capital of Vietnam?",
        options: [{ text: "Ho Chi Minh City", correct: false }, { text: "Hanoi", correct: true }, { text: "Da Nang", correct: false }]
      },
      {
        question: "Which country is also a continent?",
        options: [{ text: "Brazil", correct: false }, { text: "Australia", correct: true }, { text: "Canada", correct: false }]
      },
      {
        question: "What is the capital of Poland?",
        options: [{ text: "Krak√≥w", correct: false }, { text: "Warsaw", correct: true }, { text: "Gda≈Ñsk", correct: false }]
      },
      {
        question: "Which is the largest peninsula in the world?",
        options: [{ text: "Arabian Peninsula", correct: true }, { text: "Indian Peninsula", correct: false }, { text: "Iberian Peninsula", correct: false }]
      },
      {
        question: "What is the capital of Hungary?",
        options: [{ text: "Prague", correct: false }, { text: "Budapest", correct: true }, { text: "Vienna", correct: false }]
      },
      {
        question: "The Amazon River is located on which continent?",
        options: [{ text: "Africa", correct: false }, { text: "South America", correct: true }, { text: "Asia", correct: false }]
      },
      {
        question: "What is the capital of Peru?",
        options: [{ text: "Cusco", correct: false }, { text: "Lima", correct: true }, { text: "Arequipa", correct: false }]
      },
      {
        question: "Which country is the world's largest producer of olive oil?",
        options: [{ text: "Italy", correct: false }, { text: "Spain", correct: true }, { text: "Greece", correct: false }]
      },
      {
        question: "What is the capital of Denmark?",
        options: [{ text: "Malm√∂", correct: false }, { text: "Copenhagen", correct: true }, { text: "Oslo", correct: false }]
      },
      {
        question: "The city of Jerusalem is located in which country?",
        options: [{ text: "Lebanon", correct: false }, { text: "Israel", correct: true }, { text: "Jordan", correct: false }]
      },
      {
        question: "What is the capital of Venezuela?",
        options: [{ text: "Caracas", correct: true }, { text: "Maracaibo", correct: false }, { text: "Valencia", correct: false }]
      },
      {
        question: "Which desert covers most of Botswana?",
        options: [{ text: "Sahara", correct: false }, { text: "Kalahari", correct: true }, { text: "Gobi", correct: false }]
      },
      {
        question: "What is the capital of New Zealand?",
        options: [{ text: "Auckland", correct: false }, { text: "Wellington", correct: true }, { text: "Christchurch", correct: false }]
      },
      {
        question: "Which country is known for the Taj Mahal?",
        options: [{ text: "Pakistan", correct: false }, { text: "India", correct: true }, { text: "Bangladesh", correct: false }]
      },
      {
        question: "What is the capital of Iran?",
        options: [{ text: "Tehran", correct: true }, { text: "Mashhad", correct: false }, { text: "Isfahan", correct: false }]
      },
      {
        question: "Which is the most visited country in the world?",
        options: [{ text: "USA", correct: false }, { text: "Spain", correct: false }, { text: "France", correct: true }]
      },
      {
        question: "What is the capital of Indonesia?",
        options: [{ text: "Bandung", correct: false }, { text: "Jakarta", correct: true }, { text: "Bali", correct: false }]
      },
      {
        question: "The Yangtze River is the longest river in which continent?",
        options: [{ text: "Africa", correct: false }, { text: "Asia", correct: true }, { text: "Europe", correct: false }]
      },
      {
        question: "What is the capital of Norway?",
        options: [{ text: "Bergen", correct: false }, { text: "Oslo", correct: true }, { text: "Stavanger", correct: false }]
      },
      {
        question: "Which country is home to the ancient city of Petra?",
        options: [{ text: "Egypt", correct: false }, { text: "Jordan", correct: true }, { text: "Syria", correct: false }]
      },
      {
        question: "What is the capital of Ethiopia?",
        options: [{ text: "Nairobi", correct: false }, { text: "Addis Ababa", correct: true }, { text: "Mogadishu", correct: false }]
      },
      {
        question: "Which mountain range separates Europe and Asia?",
        options: [{ text: "Alps", correct: false }, { text: "Ural Mountains", correct: true }, { text: "Pyrenees", correct: false }]
      },
      {
        question: "What is the capital of Singapore?",
        options: [{ text: "Kuala Lumpur", correct: false }, { text: "Singapore", correct: true }, { text: "Bangkok", correct: false }]
      },
      {
        question: "The country famous for the 'Christ the Redeemer' statue is...",
        options: [{ text: "Mexico", correct: false }, { text: "Brazil", correct: true }, { text: "Argentina", correct: false }]
      },
      {
        question: "What is the capital of Switzerland?",
        options: [{ text: "Zurich", correct: false }, { text: "Bern", correct: true }, { text: "Geneva", correct: false }]
      },
      {
        question: "Which country has the most time zones?",
        options: [{ text: "USA", correct: false }, { text: "Russia", correct: false }, { text: "France", correct: true }]
      },
      {
        question: "What is the capital of Colombia?",
        options: [{ text: "Medell√≠n", correct: false }, { text: "Bogot√°", correct: true }, { text: "Cali", correct: false }]
      },
      {
        question: "Which desert is the largest hot desert in Asia?",
        options: [{ text: "Gobi Desert", correct: false }, { text: "Arabian Desert", correct: true }, { text: "Thar Desert", correct: false }]
      },
      {
        question: "What is the capital of Austria?",
        options: [{ text: "Salzburg", correct: false }, { text: "Vienna", correct: true }, { text: "Innsbruck", correct: false }]
      },
      {
        question: "Which river is often called the 'Mother River of China'?",
        options: [{ text: "Yellow River", correct: true }, { text: "Yangtze River", correct: false }, { text: "Pearl River", correct: false }]
      },
      {
        question: "What is the capital of Libya?",
        options: [{ text: "Benghazi", correct: false }, { text: "Tripoli", correct: true }, { text: "Misrata", correct: false }]
      },
      {
        question: "The continent with the most countries is...",
        options: [{ text: "Europe", correct: false }, { text: "Asia", correct: false }, { text: "Africa", correct: true }]
      },
      {
        question: "What is the capital of Kenya?",
        options: [{ text: "Mombasa", correct: false }, { text: "Nairobi", correct: true }, { text: "Kisumu", correct: false }]
      },
      {
        question: "Which of these islands is part of Japan?",
        options: [{ text: "Java", correct: false }, { text: "Honshu", correct: true }, { text: "Borneo", correct: false }]
      },
      {
        question: "What is the capital of Argentina?",
        options: [{ text: "Santiago", correct: false }, { text: "Buenos Aires", correct: true }, { text: "Lima", correct: false }]
      },
      {
        question: "The country with the world's longest coastline is...",
        options: [{ text: "USA", correct: false }, { text: "Canada", correct: true }, { text: "Indonesia", correct: false }]
      },
      {
        question: "What is the capital of Peru?",
        options: [{ text: "Cusco", correct: false }, { text: "Lima", correct: true }, { text: "Arequipa", correct: false }]
      },
      {
        question: "Which country is home to the ancient city of Machu Picchu?",
        options: [{ text: "Brazil", correct: false }, { text: "Peru", correct: true }, { text: "Mexico", correct: false }]
      },
      {
        question: "What is the capital of the Czech Republic?",
        options: [{ text: "Prague", correct: true }, { text: "Vienna", correct: false }, { text: "Bratislava", correct: false }]
      },
      {
        question: "Which river flows through Rome?",
        options: [{ text: "Po River", correct: false }, { text: "Tiber River", correct: true }, { text: "Arno River", correct: false }]
      },
      {
        question: "What is the capital of Greece?",
        options: [{ text: "Thessaloniki", correct: false }, { text: "Athens", correct: true }, { text: "Patras", correct: false }]
      },
      {
        question: "Which country is the largest in South America by area?",
        options: [{ text: "Argentina", correct: false }, { text: "Brazil", correct: true }, { text: "Peru", correct: false }]
      },
      {
        question: "What is the capital of Poland?",
        options: [{ text: "Krak√≥w", correct: false }, { text: "Warsaw", correct: true }, { text: "Wroc≈Çaw", correct: false }]
      },
      {
        question: "Which is the smallest country in Asia by area?",
        options: [{ text: "Maldives", correct: true }, { text: "Singapore", correct: false }, { text: "Bahrain", correct: false }]
      },
      {
        question: "What is the capital of the United States?",
        options: [{ text: "New York City", correct: false }, { text: "Washington, D.C.", correct: true }, { text: "Los Angeles", correct: false }]
      }
    ];

    // Shuffle array function (Fisher-Yates)
    function shuffle(array) {
      let currentIndex = array.length, randomIndex;
      while (currentIndex !== 0) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
      }
      return array;
    }

    const form = document.getElementById('quizForm');
    const modal = document.getElementById('resultModal');
    const resultTitle = document.getElementById('resultTitle');
    const resultMsg = document.getElementById('resultMsg');
    const scoreVal = document.getElementById('scoreVal');
    const xpEarned = document.getElementById('xpEarned');
    const closeModal = document.getElementById('closeModal');
    const clearBtn = document.getElementById('clearBtn');

    function get(k,d){ try { return JSON.parse(localStorage.getItem(k)) ?? d; } catch { return d; } }
    function set(k,v){ localStorage.setItem(k, JSON.stringify(v)); }

    // Render quiz questions
    function renderQuiz() {
      const shuffledQuestions = shuffle([...quizData]);
      form.innerHTML = '';
      shuffledQuestions.forEach((q, index) => {
        const fieldset = document.createElement('fieldset');
        fieldset.className = 'p-4 rounded-xl chip';
        const legend = document.createElement('legend');
        legend.className = 'font-semibold mb-2';
        legend.innerHTML = `${index + 1}) ${q.question}`;
        fieldset.appendChild(legend);

        const shuffledOptions = shuffle([...q.options]);
        shuffledOptions.forEach(opt => {
          const label = document.createElement('label');
          label.className = 'block mt-1';
          const input = document.createElement('input');
          input.type = 'radio';
          input.name = `q${index + 1}`;
          input.value = opt.text; // Store text value for easier checking
          input.className = 'mr-2';
          label.appendChild(input);
          label.appendChild(document.createTextNode(opt.text));
          fieldset.appendChild(label);
        });
        form.appendChild(fieldset);
      });
    }

    // Initial render
    renderQuiz();

    clearBtn.addEventListener('click', ()=>{
      form.reset();
    });

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      let correct = 0;
      const formData = new FormData(form);
      
      quizData.forEach((q, index) => {
        const submittedValue = formData.get(`q${index + 1}`);
        const correctOption = q.options.find(opt => opt.correct);
        if (submittedValue === correctOption.text) {
          correct++;
        }
      });

      const score = Math.round((correct / quizData.length) * 100);
      let bonus = Math.floor(score / 10); // 10 XP per 10%
      if (score === 100) bonus += 20; // 20 bonus XP for perfect score

      const xp = get('gh_xp', 0) + bonus;
      set('gh_xp', xp);

      const badges = get('gh_badges', []);
      if(score === 100 && !badges.includes('Perfect Score')) {
        badges.push('Perfect Score');
        set('gh_badges', badges);
      }
      if(xp >= 500 && !badges.includes('World Scholar')) {
        badges.push('World Scholar');
        set('gh_badges', badges);
      }
      
      const hist = get('gh_quizHistory', []);
      hist.push(score);
      set('gh_quizHistory', hist.slice(-20)); // Keep only last 20 scores

      scoreVal.textContent = score + '%';
      xpEarned.textContent = `+${bonus}`;
      resultTitle.textContent = score >= 80 ? 'üéâ Excellent!' : score >= 50 ? 'üëç Good try!' : 'üí™ Keep going!';
      resultMsg.textContent = score >= 80 ? 'You smashed it! Check out your new badges on the dashboard.' : 'Review a topic and try again.';

      modal.showModal();

      closeModal.addEventListener('click', ()=>{
        modal.close();
      });
    });
  </script>
</body>
</html>
